<!DOCTYPE html>
<html data-theme="light">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Phyweb Tracker</title>
    <link rel="icon" href="lib/favicons/favicon.ico" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.2/css/bulma.min.css">
    <link rel="stylesheet" href="lib/common.css">

    <script defer src="lib/fontawesome/solid.min.js"></script>
    <script defer src="lib/fontawesome/fontawesome.min.js"></script>

    <script type="module" src="main.js"></script>
  </head>
  <body>
  <div id="app" class="section has-background-light" style="padding:1.2rem">
  <nav class="navbar box is-flex-shrink-0" role="navigation" aria-label="main navigation" style="padding:0">
    <div class="navbar-brand">
      <div class="navbar-item is-size-4 has-text-weight-bold">
        PhyWeb
      </div>
    </div>
    <div class="navbar-menu">
      <div class="navbar-start">
        <div class="navbar-item has-dropdown is-boxed is-hoverable">
          <a id="navbar-dropdown" class="navbar-link has-text-primary is-size-4 has-text-weight-bold">
            <span class="icon"><i class="fa fa-crosshairs"></i></span>
            <span>Tracker</span>
          </a>
          <div class="navbar-dropdown">
            <a class="navbar-item is-link is-size-5">
              <span class="icon"><i class="fa fa-volume-high"></i></span>
              <span>Audio</span>
            </a>
            <hr class="navbar-divider">
            <a class="navbar-item is-size-5">
              <span class="icon"><i class="fa fa-circle-info"></i></span>
              <span>A propos</span>
            </a>
          </div>
        </div>
      </div>
      <div class="navbar-end">
        <div class="navbar-item">
          <button class="button is-white is-hidden" id="magnifier-button">
            <span class="icon is-medium"><i class="fas fa-pause fa-magnifying-glass"></i></span>
          </button>
        </div>
        <div class="navbar-item">
          <a class="button is-primary js-modal-trigger" data-target="open-modal">
            <strong>Ouvrir une vidéo</strong>
          </a>
        </div>
      </div>
    </div>
  </nav>
  <div class="columns is-flex-grow-1 is-overflow-auto" id="handler-wrapper" style="margin-bottom: 0;">
    <div class="column is-flex is-flex-direction-column pr-0">
      <div class="block is-flex-grow-1" id="videoContainer">
        <canvas id="videoCanvas"></canvas>
        <div id="canvas-shadow"></div>
      </div>
      <div class="has-text-centered is-hidden" id="video-controls">
        <div class="box is-inline-block is-centered p-3">
          <button class="button is-white" id="play-button">
            <span class="icon is-medium"><i class="fas fa-play fa-lg"></i></span>
          </button>
          <button class="button is-white is-hidden" id="pause-button">
            <span class="icon is-medium"><i class="fas fa-pause fa-lg"></i></span>
          </button>
          <button class="button is-white" id="first-button">
            <span class="icon is-medium"><i class="fas fa-backward-step fa-lg"></i></span>
          </button>
          <button class="button is-white" id="previous-button">
            <span class="icon is-medium"><i class="fas fa-backward fa-lg"></i></span>
          </button>
          <button class="button is-white" id="next-button">
            <span class="icon is-medium"><i class="fas fa-forward fa-lg"></i></span>
          </button>
          <button class="button is-white" id="last-button">
            <span class="icon is-medium"><i class="fas fa-forward-step fa-lg"></i></span>
          </button>
          <label class="is-size-4 is-inline-block" id="frame-label">
          </label>
        </div>
      </div>
    </div>
    <div class="column handler"></div>
    <div class="column is-narrow is-hidden pl-0" id="right-column">
      <div class="box is-flex is-flex-direction-column" style="width: 285px">
        <div class="tabs is-fullwidth is-flex-shrink-0">
          <ul>
            <li class="is-active" id="etalonnage-button"><a>Etalonnage</a></li>
            <li id="mesures-button"><a>Mesures</a></li>
          </ul>
        </div>
        <div id="etalonnage-panel" class="container">
          <div class="block">
            <p class="title is-5">Origine des axes</p>
            <div class="level">
              <button class="button level-item p-0 is-active" id="topright">
                <span class="fa-stack fa-lg " >
                  <i class="fa-solid fa-arrow-up-long fa-stack-1x" data-fa-transform="left-4"></i>
                  <i class="fa-solid fa-arrow-right-long fa-stack-1x" data-fa-transform="down-4"></i>
                </span>
              </button>
              <button class="button level-item p-0" id="topleft">
                <span class="fa-stack fa-lg" >
                  <i class="fa-solid fa-arrow-up-long fa-stack-1x" data-fa-transform="right-4"></i>
                  <i class="fa-solid fa-arrow-left-long fa-stack-1x" data-fa-transform="down-4"></i>
                </span>
              </button>
              <button class="button level-item p-0" id="downright">
                <span class="fa-stack fa-lg" >
                  <i class="fa-solid fa-arrow-down-long fa-stack-1x" data-fa-transform="left-4"></i>
                  <i class="fa-solid fa-arrow-right-long fa-stack-1x" data-fa-transform="up-4"></i>
                </span>
              </button>
              <button class="button level-item p-0" id="downleft">
                <span class="fa-stack fa-lg" >
                  <i class="fa-solid fa-arrow-down-long fa-stack-1x" data-fa-transform="right-4"></i>
                  <i class="fa-solid fa-arrow-left-long fa-stack-1x" data-fa-transform="up-4"></i>
                </span>
              </button>
            </div>
          </div>
          <div class="block">
            <p class="title is-5">Echelle</p>
            <button class="button is-medium is-fullwidth block" id="segment-button">
              Tracer le segment
            </button>
            <div class="columns is-vcentered">
              <div class="column">
                <label class="label is-medium has-text-right">d =</label>
              </div>
              <div class="column is-half">
                <p class="control">
                  <input class="input no-spin" type="number" value="1" id="scale-input"/>
                </p>
              </div>
              <div class="column">
                <label class="label is-medium"> m</label>
              </div>
            </div>
          </div>
          <div class="block">
            <p class="title is-5">Reglages</p>
            <div class="columns is-vcentered">
              <div class="column is-narrow pr-0 ">
                <label class="label is-medium">Origine : Image n°</label>
              </div>
              <div class="column">
                <p class="control">
                  <input class="input" type="number" min="1" value="1" id="origin-frame-input"/>
                </p>
              </div>
            </div>
            <div class="columns is-vcentered">
              <div class="column is-narrow pr-0">
                <label class="label is-medium">Points par image :</label>
              </div>
              <div class="column">
                <p class="control">
                  <input class="input" type="number" min="1" max="9" value="1" id="ppf-input"/>
                </p>
              </div>
            </div>
          </div>
        </div>
        <div id="mesures-panel" class="container is-hidden is-flex-direction-column is-overflow-auto">
          <div class="block is-flex-grow-1 is-overflow-auto" >
            <div class="table-container">
              <table class="table is-hoverable is-narrow is-fullwidth is-striped has-text-centered">
                <thead id="table-head">

                </thead>
                <tbody id="table-body">

                </tbody>
              </table>
            </div>
          </div>
          <div class="block is-flex-shrink-0 level">
            <div class="level-item">
              <button class="button" id="clear-row">
                <img src="lib/row.svg" height="30" width="36"/>
              </button>
            </div>
            <div class="level-item">
              <button class="button" id="clear-table">
                <img src="lib/table.svg" height="30" width="36"/>
              </button>
            </div>
          </div>
          <div class="block is-clipped is-flex-shrink-0">
            <button class="button is-fullwidth is-primary is-medium" id="download-button">
              <span class="icon">
                <i class="fa-solid fa-download"></i>
              </span>
              <span>Télécharger</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>  
  </div>
  <div id="open-modal" class="modal">
    <div class="modal-background"></div>
    <div class="modal-card" id="open-modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title">Ouvrir une vidéo</p>
        <button class="delete" aria-label="close"></button>
      </header>
      <section class="modal-card-body is-flex">
        <div class="columns is-flex-grow-1">
          <div class="column">
            <aside class="menu" id="video-list"></aside>
          </div>
          <div class="column is-narrow vertical-divider">
          </div>
          <div class="column">
            <div class="block">
              <img id="video-thumbnail" />
            </div>
            <div class="block">
              <p id="video-description"></p>
            </div>
          </div>
        </div>
      </section>
      <footer class="modal-card-foot">
        <div class="columns is-flex-grow-1 is-vcentered">
          <div class="column">
            <button class="button is-primary is-fullwidth" id="open-video" disabled>Ouvrir la vidéo sélectionnée</button>
          </div>
          <div class="column is-narrow">
            ou
          </div>
          <div class="column is-narrow">
            <div class="file is-primary ">
              <label class="file-label">
                <input class="file-input" type="file" accept=".mp4, .m4v" id="file-input" />
                <span class="file-cta">
                  <span class="file-icon">
                    <i class="fas fa-upload"></i>
                  </span>
                  <span class="file-label"> Ouvrir un fichier vidéo téléchargé </span>
                </span>
              </label>
            </div>
          </div>
        </div>
      </footer>
    </div>
  </div>
  <div id="file-size-modal" class="modal">
    <div class="modal-background"></div>
    <div class="modal-card" id="file-size-modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title is-size-4">Video très volumineuse</p>
        <button class="delete" aria-label="close"></button>
      </header>
      <section class="modal-card-body is-size-5">
        <p class="block">
          La vidéo occupe <span class="has-text-danger has-text-weight-bold" id="size-label">xx Mio</span> de mémoire vidéo.
        </p>
        <p class="block">
          Il est recommandé de ne pas dépasser <span class="has-text-weight-bold">1024 Mio</span>.
        </p>
        <p class="block">
          Choisissez quel(s) modifications vous souhaitez appliquer :
        </p>
        <article class="message">
          <div class="message-body">
            <label class="checkbox">
              <input type="checkbox" id="def-size-input"/>
              <span>Réduire la définition de l'image</span><span id="def-size-label"></span>
            </label>
          </div>
        </article>
        <article class="message">
          <div class="message-body">
            <label class="checkbox">
              <input type="checkbox" id="fps-size-input"/>
              <span>Réduire le nombre d'images par seconde</span><span id="fps-size-label"></span>
              
            </label>
          </div>
        </article>
        <article class="message">
          <div class="message-body">
            <label class="checkbox pb-4">
              <input type="checkbox" id="duration-size-input"/>
              Réduire la durée de la vidéo (Durée totale : <span id="duration-size-label"></span> s)
            </label>
            <div class="columns block is-vcentered is-hidden" id="duration-size-inputs">
              <div class="column is-narrow pr-0 ">
                <label class="label">Début :</label>
              </div>
              <div class="column">
                <p class="control">
                  <input class="input" type="number" min="0" value="0" id="start-size-input"/>
                </p>
              </div>
              <div class="column is-narrow pr-0 ">
                <label class="label">Fin :</label>
              </div>
              <div class="column">
                <p class="control">
                  <input class="input" type="number" min="0" value="0" id="end-size-input"/>
                </p>
              </div>
              <div class="column is-narrow pr-0 ">
                <label class="label"></label>
              </div>
            </div>
          </div>
        </article>
      </section>
      <footer class="modal-card-foot">
        <button class="button is-danger is-fullwidth" id="open-resized-video"></button>
      </footer>
    </div>
  </div>
  
  </body>
</html>